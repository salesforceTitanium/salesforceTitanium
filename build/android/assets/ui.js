function DetailWindow(e,t,r){var o=Ti.UI.createWindow({title:e?"Update Account":"New Account",backgroundColor:"#fff",navBarHidden:!1,modal:!e,layout:"vertical",backButtonTitle:"Back"}),i=Ti.UI.createTableView({data:[{title:"Loading..."}]});o.add(i);var a=[],n=Ti.UI.createTableViewRow({className:"row",objName:"row",touchEnabled:!1,height:100,hasChild:!1}),c=Ti.UI.createView({backgroundColor:"#FFFFFF",width:Ti.UI.FILL,height:"100%"}),s=Ti.UI.createView({backgroundColor:"#CCCCCC",touchEnabled:!1,width:"99%",height:"95%"});c.add(s),s.add(Ti.UI.createLabel({color:"#000000",text:"Account Name",left:0,top:10,width:"100%"}));var d=Ti.UI.createTextField({left:10,right:10,top:15,value:null!=t?t.Name:"",color:"#000000",keyboardType:Ti.UI.KEYBOARD_DEFAULT,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED});s.add(d),n.add(c),a.push(n);var n=Ti.UI.createTableViewRow({className:"row",objName:"row",touchEnabled:!1,height:100,hasChild:!1}),c=Ti.UI.createView({backgroundColor:"#FFFFFF",width:Ti.UI.FILL,height:"100%"}),s=Ti.UI.createView({backgroundColor:"#CCCCCC",touchEnabled:!1,width:"99%",height:"95%"});c.add(s),s.add(Ti.UI.createLabel({text:"Account Number",color:"#000000",left:0,top:10,width:"100%"}));var l=Ti.UI.createTextField({value:null!=t?t.AccountNumber:"",left:10,right:10,top:15,color:"#000000",keyboardType:Ti.UI.KEYBOARD_DEFAULT,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED});s.add(l),n.add(c),a.push(n);var n=Ti.UI.createTableViewRow({className:"row",objName:"row",touchEnabled:!1,height:100,hasChild:!1}),c=Ti.UI.createView({backgroundColor:"#FFFFFF",width:Ti.UI.FILL,height:"100%"}),s=Ti.UI.createView({backgroundColor:"#CCCCCC",touchEnabled:!1,width:"99%",height:"95%"});c.add(s);var u=Ti.UI.createButton({top:10,title:e?"Update":"Create"});if(s.add(u),n.add(c),a.push(n),i.setData(a),"android"!==Ti.Platform.osname&&!e){var T=Ti.UI.createButton({title:"Cancel",style:Ti.UI.iPhone.SystemButtonStyle.PLAIN});o.setRightNavButton(T),T.addEventListener("click",function(){o.close()})}return u.addEventListener("click",function(){var t=e?"/"+e+"/?_HttpMethod=PATCH":"/";force.request({type:"POST",url:"/sobjects/Account"+t,data:{Name:d.value,AccountNumber:l.value},callback:function(){r()},onerror:function(){alert("durp")}})}),o}var force=require("force");exports.createAppWindow=function(){function e(){var e=new DetailWindow(null,null,function(){e.close(),t()});e.open()}function t(){n.setData([{title:"Loading..."}]),force.request({type:"GET",url:"/query/?q="+Ti.Network.encodeURIComponent("SELECT Name,AccountNumber from Account"),callback:function(e){for(var t=[],r=0,o=e.records.length;o>r;r++){var i=e.records[r];Ti.API.info(JSON.stringify(i));var a=Ti.UI.createTableViewRow({className:"row",objName:"row",touchEnabled:!0,height:50,accountId:i.attributes.url.split("Account/")[1],rowData:i,hasChild:!0}),c=Ti.UI.createView({backgroundColor:"#CCCCCC",width:Ti.UI.FILL,height:"100%"}),s=Ti.UI.createView({backgroundColor:"#FFFFFF",touchEnabled:!1,width:"99%",height:"95%"});c.add(s);var d=Ti.UI.createLabel({color:"#000000",text:i.Name,touchEnabled:!1,left:0,width:"100%"});s.add(d),a.add(c),t.push(a)}n.setData(t)}})}var r=Ti.UI.createWindow({title:"Salesforce Accounts",exitOnClose:!0,backgroundColor:"#fff",navBarHidden:!1});if("android"!==Ti.Platform.osname){var o=Ti.UI.createWindow(),i=Ti.UI.iPhone.createNavigationGroup({window:r});o.add(i);var a=Ti.UI.createButton({systemButton:Ti.UI.iPhone.SystemButton.ADD});r.setRightNavButton(a),a.addEventListener("click",e)}else r.activity.onCreateOptionsMenu=function(t){var r=t.menu,o=r.add({title:"Add Account"});o.setIcon(Ti.Android.R.drawable.ic_menu_add),o.addEventListener("click",e)};var n=Ti.UI.createTableView({data:[{title:"Loading..."}]});return r.add(n),n.addEventListener("click",function(e){var r=new DetailWindow(e.rowData.accountId,e.rowData.rowData,function(){"android"!==Ti.Platform.osname?i.close(r):r.close(),t()});"android"!==Ti.Platform.osname?i.open(r):r.open()}),t(),o||r};